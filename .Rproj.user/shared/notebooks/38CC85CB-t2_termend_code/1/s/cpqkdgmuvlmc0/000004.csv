"0","#------------------------------------------------"
"0","#メッシュ境界データ取得"
"0","#------------------------------------------------"
"0","#チャンクオプションにeval=FALSEを追加"
"0","#初めての時のみ実行すれば良い"
"0",""
"0","#関数を作成"
"0","#----- START: fDownloadMeshShapefile() -----"
"0","fDownloadMeshShapefile <- function(x){"
"0","  #DLメッセージ"
"0","  print(paste0(""Downloading shapefile of mesh code "", x, "" from e-Stat...""))"
"0",""
"0","  #URL設定"
"0","  url <- ""https://www.e-stat.go.jp/gis/statmap-search/data"""
"0","  param <- paste0(""?dlserveyId=H&code="", x, ""&coordSys=1&format=shape&downloadType=5"")"
"0",""
"0","  #保存ファイル名"
"0","  filename <- paste0(""MESH_code"", x, ""_shape.zip"")"
"0","  "
"0","  #ダウンロード"
"0","  GET(paste0(url, param), write_disk(paste0(""data_estat_mesh500m/"", filename), overwrite = TRUE))"
"0","  "
"0","  #ZIPファイルを解凍"
"0","  unzip(paste0(""data_estat_mesh500m/"", filename), exdir = ""data_estat_mesh500m"")"
"0","}"
"0","#----- END: fDownloadMeshShapefile() -----"
"0",""
"0","#Web APIの次の命令の待機時間を設定"
"0","#サーバー負荷を避けるため"
"0","sleepSecond <- 5"
"0",""
"0","#Forループでメッシュ統計データをダウンロードする"
"0","for (i in listMeshCode) {"
"0","  #関数の実行"
"0","  fDownloadMeshShapefile(i)  "
"0",""
"0","  #次のループの待機"
"0","  Sys.sleep(sleepSecond)"
"0","}"
"1","[1]"
"1"," ""Downloading shapefile of mesh code 5338 from e-Stat..."""
"1","
"
"1","[1]"
"1"," ""Downloading shapefile of mesh code 5339 from e-Stat..."""
"1","
"
"1","[1]"
"1"," ""Downloading shapefile of mesh code 5135 from e-Stat..."""
"1","
"
"1","[1]"
"1"," ""Downloading shapefile of mesh code 5235 from e-Stat..."""
"1","
"
